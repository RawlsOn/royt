# YouTube API í…ŒìŠ¤íŠ¸ ì»¤ë§¨ë“œ ì‚¬ìš©ë²•

YouTube API ë˜í¼ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ Django ê´€ë¦¬ ì»¤ë§¨ë“œ ë¬¸ì„œì…ë‹ˆë‹¤.

---

## ê³µí†µ ì˜µì…˜

ëª¨ë“  ì»¤ë§¨ë“œëŠ” ë‹¤ìŒ ì˜µì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤:
- `--verbose`: ìƒì„¸í•œ ë¡œê·¸ ë° API ì›ë³¸ ì‘ë‹µ ì¶œë ¥ (ê¸°ë³¸ê°’: ê°„ë‹¨í•œ ìš”ì•½ë§Œ ì¶œë ¥)
- `--no-db`: DBì— ì €ì¥í•˜ì§€ ì•ŠìŒ (ê¸°ë³¸ê°’: DBì— ì €ì¥)

---

## ì±„ë„ ì •ë³´ ì¡°íšŒ
```bash
# ì±„ë„ í•¸ë“¤ë¡œ ì¡°íšŒ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_get_channel_info @ì‚´ë¦¼ë‚¨

```

## ì±„ë„ ì˜ìƒ ëª©ë¡ ì¡°íšŒ
```bash
# ì±„ë„ IDë¡œ ì¡°íšŒ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_list_channel_videos UCPF2WvEWPP-1utUwwsdbeCw

# ì±„ë„ í•¸ë“¤ë¡œ ì¡°íšŒ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_list_channel_videos @ë– ë“¤ì©

# ìƒì„¸ ë¡œê·¸ì™€ í•¨ê»˜ ì¡°íšŒ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_list_channel_videos @ë– ë“¤ì© --verbose
```

## ìµœê·¼ Nê°œì›” ì˜ìƒë§Œ ì €ì¥
```bash
# ìµœê·¼ 3ê°œì›” ì˜ìƒë§Œ ì €ì¥ (ê¸°ë³¸ê°’)
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_save_recent_channel_videos @ë– ë“¤ì©

# ìµœê·¼ 6ê°œì›” ì˜ìƒë§Œ ì €ì¥
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_save_recent_channel_videos @ë– ë“¤ì© --months 6

# ìµœëŒ€ 100ê°œê¹Œì§€ë§Œ ì¡°íšŒí•˜ê³  í•„í„°ë§
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_save_recent_channel_videos @ë– ë“¤ì© --max-results 100

# ìƒì„¸ ë¡œê·¸ì™€ í•¨ê»˜ ì‹¤í–‰
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_save_recent_channel_videos @ë– ë“¤ì© --verbose

# DBì— ì €ì¥í•˜ì§€ ì•Šê³  í•„í„°ë§ë§Œ í…ŒìŠ¤íŠ¸
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_save_recent_channel_videos @ë– ë“¤ì© --no-db
```

**ê¸°ëŠ¥:**
- `list_channel_videos`ë¡œ ì±„ë„ì˜ ì˜ìƒ ëª©ë¡ì„ ê°€ì ¸ì˜¨ í›„, ìµœê·¼ Nê°œì›” ì´ë‚´ì˜ ì˜ìƒë§Œ í•„í„°ë§
- ì˜¤ë˜ëœ ì˜ìƒì´ ë‚˜ì˜¤ë©´ ì¡°íšŒë¥¼ ì¤‘ë‹¨í•˜ì—¬ API í• ë‹¹ëŸ‰ ì ˆì•½
- í•„í„°ë§ëœ ì˜ìƒ ìˆ˜ì™€ ì „ì²´ ì¡°íšŒ ì˜ìƒ ìˆ˜ë¥¼ í•¨ê»˜ ì¶œë ¥

**ì˜µì…˜:**
- `--months N`: ìµœê·¼ Nê°œì›”ê¹Œì§€ ì €ì¥ (ê¸°ë³¸ê°’: 3ê°œì›”)
- `--max-results N`: ìµœëŒ€ ì¡°íšŒ ê°œìˆ˜ (ê¸°ë³¸ê°’: 200)

## DBì—ì„œ ì˜¤ë˜ëœ ì˜ìƒ ì‚­ì œ
```bash
# ëª¨ë“  ì±„ë„ì˜ 3ê°œì›” ì´ì „ ì˜ìƒ ì‚­ì œ (í™•ì¸ ì ˆì°¨ ìˆìŒ)
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_delete_old_channel_videos

# íŠ¹ì • ì±„ë„ì˜ 3ê°œì›” ì´ì „ ì˜ìƒ ì‚­ì œ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_delete_old_channel_videos --channel @ë– ë“¤ì© --confirm

# íŠ¹ì • ì±„ë„ì˜ 6ê°œì›” ì´ì „ ì˜ìƒ ì‚­ì œ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_delete_old_channel_videos --channel @ë– ë“¤ì© --months 6 --confirm

# í™•ì¸ ì—†ì´ ë°”ë¡œ ì‚­ì œ (ì£¼ì˜!)
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_delete_old_channel_videos --channel @ë– ë“¤ì© --confirm

# ìƒì„¸ ë¡œê·¸ì™€ í•¨ê»˜ ì‚­ì œ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_delete_old_channel_videos --channel @ë– ë“¤ì© --verbose
```

**ê¸°ëŠ¥:**
- DBì—ì„œ Nê°œì›” ì´ìƒ ëœ ì˜ìƒì„ ì˜êµ¬ ì‚­ì œ
- YouTube APIë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í• ë‹¹ëŸ‰ ì†Œë¹„ ì—†ìŒ
- íŠ¹ì • ì±„ë„ë§Œ ì§€ì •í•˜ê±°ë‚˜ ëª¨ë“  ì±„ë„ ëŒ€ìƒ ê°€ëŠ¥
- ê¸°ë³¸ì ìœ¼ë¡œ ì‚­ì œ ì „ í™•ì¸ ì ˆì°¨ ì œê³µ

**ì˜µì…˜:**
- `--channel @ì±„ë„ëª…`: íŠ¹ì • ì±„ë„ë§Œ ì‚­ì œ (ìƒëµí•˜ë©´ ëª¨ë“  ì±„ë„)
- `--months N`: Nê°œì›” ì´ì „ ì˜ìƒ ì‚­ì œ (ê¸°ë³¸ê°’: 3ê°œì›”)
- `--confirm`: í™•ì¸ ì ˆì°¨ ì—†ì´ ë°”ë¡œ ì‚­ì œ (ì£¼ì˜!)
- `--verbose`: ì‚­ì œë  ì˜ìƒ ëª©ë¡ ë¯¸ë¦¬ë³´ê¸°

**âš ï¸ ì£¼ì˜ì‚¬í•­:**
- ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!
- `--confirm` ì˜µì…˜ì´ ì—†ìœ¼ë©´ 'yes' ì…ë ¥ì„ í†µí•œ í™•ì¸ ì ˆì°¨ê°€ ìˆìŠµë‹ˆë‹¤
- ì˜ìƒì˜ ê²Œì‹œì¼(`published_at`)ì„ ê¸°ì¤€ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤

## ë¹„ë””ì˜¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ
```bash
# ë¹„ë””ì˜¤ IDë¡œ ì¡°íšŒ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_get_video_info 6JYx7wGO5qQ

# ìƒì„¸ ë¡œê·¸ì™€ í•¨ê»˜ ì¡°íšŒ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_get_video_info 6JYx7wGO5qQ --verbose
```

**ì¡°íšŒë˜ëŠ” ì •ë³´:**
- ë¹„ë””ì˜¤ ID, ì œëª©, ì„¤ëª…
- ì±„ë„ ID, ì±„ë„ ì œëª©
- ê²Œì‹œì¼, ì¸ë„¤ì¼ URL
- ì¬ìƒì‹œê°„ (ISO 8601 í˜•ì‹ ë° ì´ˆ ë‹¨ìœ„)
- Shorts ì—¬ë¶€ (60ì´ˆ ë¯¸ë§Œ)
- ì¡°íšŒìˆ˜, ì¢‹ì•„ìš” ìˆ˜, ëŒ“ê¸€ ìˆ˜
- íƒœê·¸, ì¹´í…Œê³ ë¦¬ ID

## ë¹„ë””ì˜¤ ìë§‰ ì¡°íšŒ
```bash
# ë¹„ë””ì˜¤ ìë§‰ ì¡°íšŒ (ê¸°ë³¸: í•œêµ­ì–´ ìš°ì„ , ì—†ìœ¼ë©´ ì˜ì–´)
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_get_video_transcript 6JYx7wGO5qQ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_get_video_transcript bUY3wNjcVMk

# íŠ¹ì • ì–¸ì–´ ìš°ì„ ìˆœìœ„ ì§€ì •
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_get_video_transcript 6JYx7wGO5qQ --languages en,ko

# ì˜ì–´ë§Œ ì¡°íšŒ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_get_video_transcript 6JYx7wGO5qQ --languages en

# DBì— ì €ì¥í•˜ì§€ ì•Šê³  ì¡°íšŒ
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_get_video_transcript 6JYx7wGO5qQ --no-db

# ìƒì„¸ ë¡œê·¸ì™€ í•¨ê»˜ ì¡°íšŒ (ì„¸ê·¸ë¨¼íŠ¸ ì •ë³´ í¬í•¨)
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_get_video_transcript 6JYx7wGO5qQ --verbose
```

**ê¸°ëŠ¥:**
- `youtube-transcript-api` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© (YouTube Data API í• ë‹¹ëŸ‰ ì†Œë¹„ ì—†ìŒ)
- **ìˆ˜ë™ ìë§‰ê³¼ ìë™ ìƒì„± ìë§‰ ëª¨ë‘ ì§€ì›** (ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬)
- ìš°ì„ ìˆœìœ„ ì–¸ì–´ ìˆœì„œëŒ€ë¡œ ìë§‰ ê²€ìƒ‰
- ì „ì²´ ìë§‰ì„ í•˜ë‚˜ì˜ í…ìŠ¤íŠ¸ë¡œ ê²°í•©í•˜ì—¬ DBì— ì €ì¥

**ì˜µì…˜:**
- `--languages ko,en`: ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ì–¸ì–´ ì½”ë“œ ìš°ì„ ìˆœìœ„ (ê¸°ë³¸ê°’: ko)
- `--no-db`: DBì— ì €ì¥í•˜ì§€ ì•ŠìŒ
- `--verbose`: ì„¸ê·¸ë¨¼íŠ¸ ì •ë³´ ë° íƒ€ì„ìŠ¤íƒ¬í”„ ì¶œë ¥

**ì¡°íšŒë˜ëŠ” ì •ë³´:**
- ë¹„ë””ì˜¤ ID
- ìë§‰ ì „ì²´ í…ìŠ¤íŠ¸
- ì‚¬ìš©ëœ ì–¸ì–´ ì½”ë“œ
- ì„¸ê·¸ë¨¼íŠ¸ ì •ë³´ (verbose ëª¨ë“œ)

**âš ï¸ ì°¸ê³ ì‚¬í•­:**
- ìë§‰ì´ ë¹„í™œì„±í™”ëœ ì˜ìƒì€ ì¡°íšŒ ë¶ˆê°€
- ë¹„ê³µê°œ ë˜ëŠ” ì‚­ì œëœ ì˜ìƒì€ ì¡°íšŒ ë¶ˆê°€
- DBì— ì €ì¥í•˜ë ¤ë©´ í•´ë‹¹ ë¹„ë””ì˜¤ê°€ ë¨¼ì € DBì— ìˆì–´ì•¼ í•¨ (`get_video_info`ë¡œ ë¨¼ì € ì €ì¥)

## ì±„ë„ ì˜ìƒ ìë§‰ ì¼ê´„ ì €ì¥
```bash
# ì±„ë„ í•¸ë“¤ë¡œ ëª¨ë“  ì˜ìƒ ìë§‰ ì €ì¥
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_save_all_channel_video_transcripts @ë– ë“¤ì©

# ì±„ë„ IDë¡œ ëª¨ë“  ì˜ìƒ ìë§‰ ì €ì¥
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_save_all_channel_video_transcripts UC_x5XG1OV2P6uZZ5FSM9Ttw

# íŠ¹ì • ì–¸ì–´ë¡œ ì €ì¥
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_save_all_channel_video_transcripts @ë– ë“¤ì© --languages ko

# ìƒì„¸ ë¡œê·¸ì™€ í•¨ê»˜ ì €ì¥
docker exec royt-royt-api-gateway-1 ./manage.py test_youtube_api_save_all_channel_video_transcripts @ë– ë“¤ì© --verbose
```

**ê¸°ëŠ¥:**
- ì±„ë„ì˜ DBì— ì €ì¥ëœ ëª¨ë“  ì˜ìƒì˜ ìë§‰ì„ ì¼ê´„ ì €ì¥
- ì´ë¯¸ ì‹œë„í•œ ì˜ìƒì€ ìë™ìœ¼ë¡œ ê±´ë„ˆë›°ê¸° (ì„±ê³µ/ì‹¤íŒ¨ ëª¨ë‘)
- ìë§‰ ì¡°íšŒ ê²°ê³¼ë¥¼ DBì— ì €ì¥ (ì„±ê³µ, ìë§‰ ì—†ìŒ, ë¹„í™œì„±í™” ë“±)
- ì§„í–‰ ìƒí™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶œë ¥ (ì˜ˆ: [1/23])
- ê° ìš”ì²­ í›„ 180~300ì´ˆ ëœë¤ ëŒ€ê¸° (IP ë¸”ë½ ë°©ì§€)
- YouTube IP ë¸”ë½ ê°ì§€ ì‹œ ìë™ ì¤‘ë‹¨
- ìµœì¢… í†µê³„ ì¶œë ¥ (ì„±ê³µ/ì‹¤íŒ¨/ê±´ë„ˆë›°ê¸°)

**ì˜µì…˜:**
- `--languages ko,en`: ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ì–¸ì–´ ì½”ë“œ ìš°ì„ ìˆœìœ„ (ê¸°ë³¸ê°’: ko)
- `--verbose`: ê° ì˜ìƒë³„ ìƒì„¸í•œ ë¡œê·¸ ì¶œë ¥

**ìë§‰ ì¡°íšŒ ìƒíƒœ:**
- `success`: ìë§‰ì„ ì„±ê³µì ìœ¼ë¡œ ê°€ì ¸ì˜´
- `no_transcript`: ìš”ì²­í•œ ì–¸ì–´ì˜ ìë§‰ì´ ì—†ìŒ
- `disabled`: ìë§‰ì´ ë¹„í™œì„±í™”ë¨
- `unavailable`: ë¹„ë””ì˜¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ
- `error`: ê¸°íƒ€ ì˜¤ë¥˜

**âš ï¸ ì£¼ì˜ì‚¬í•­:**
- ë¨¼ì € `get_channel_info`ë¡œ ì±„ë„ ì •ë³´ë¥¼ ì €ì¥í•´ì•¼ í•¨
- ë¨¼ì € `list_channel_videos`ë¡œ ì˜ìƒ ëª©ë¡ì„ ì €ì¥í•´ì•¼ í•¨
- í•œ ë²ˆ ì‹œë„í•œ ì˜ìƒì€ ë‹¤ì‹œ ì‹œë„í•˜ì§€ ì•ŠìŒ (ì‹¤íŒ¨í•´ë„)
- YouTube API í• ë‹¹ëŸ‰ì„ ì†Œë¹„í•˜ì§€ ì•ŠìŒ (youtube-transcript-api ì‚¬ìš©)


## ì±„ë„ í…ìŠ¤íŠ¸ ë°ì´í„° JSON ë‚´ë³´ë‚´ê¸°
```bash
# ìë§‰ì´ ìˆëŠ” ì˜ìƒë§Œ ë‚´ë³´ë‚´ê¸° (í•¸ë“¤ ì‚¬ìš©)
docker exec royt-royt-api-gateway-1 ./manage.py export_channel_transcripts --channel @ë– ë“¤ì© --only-with-transcript

# ëª¨ë“  ì˜ìƒ ë‚´ë³´ë‚´ê¸° (ì±„ë„ ID ì‚¬ìš©)
docker exec royt-royt-api-gateway-1 ./manage.py export_channel_transcripts --channel UCPF2WvEWPP-1utUwwsdbeCw

# íŠ¹ì • ë””ë ‰í† ë¦¬ì— ì €ì¥
docker exec royt-royt-api-gateway-1 ./manage.py export_channel_transcripts --channel @ë– ë“¤ì© --output-dir /usr/data/exports --only-with-transcript
```

**ê¸°ëŠ¥:**
- íŠ¹ì • ì±„ë„ì˜ ëª¨ë“  ì˜ìƒ í…ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°
- ì œëª©, ì›ë³¸ ìë§‰, ë©”íƒ€ë°ì´í„° í¬í•¨
- ì±„ë„ ì •ë³´ë„ í•¨ê»˜ ì €ì¥
- íƒ€ì„ìŠ¤íƒ¬í”„ê°€ í¬í•¨ëœ íŒŒì¼ëª…ìœ¼ë¡œ ìë™ ì €ì¥

**ì˜µì…˜:**
- `--channel <ì±„ë„ID|@í•¸ë“¤>`: ë‚´ë³´ë‚¼ ì±„ë„ ID ë˜ëŠ” í•¸ë“¤ (í•„ìˆ˜)
- `--output-dir <ê²½ë¡œ>`: JSON íŒŒì¼ì„ ì €ì¥í•  ë””ë ‰í† ë¦¬ (ê¸°ë³¸ê°’: /usr/data/roytlocal/)
- `--only-with-transcript`: ìë§‰ì´ ìˆëŠ” ì˜ìƒë§Œ ë‚´ë³´ë‚´ê¸°

**ì¶œë ¥ íŒŒì¼ êµ¬ì¡°:**
```json
{
  "channel": {
    "channel_id": "...",
    "channel_title": "ë– ë“¤ì©",
    "subscriber_count": ...,
    ...
  },
  "export_info": {
    "exported_at": "2025-10-23T...",
    "total_videos": 50,
    "only_with_transcript": true
  },
  "videos": [
    {
      "video_id": "...",
      "title": "ì˜ìƒ ì œëª©",
      "description": "...",
      "transcript": "ì›ë³¸ ìë§‰...",
      "youtube_url": "https://www.youtube.com/watch?v=...",
      "published_at": "...",
      "view_count": ...,
      "like_count": ...,
      "tags": [...],
      ...
    }
  ]
}
```

**íŒŒì¼ëª… í˜•ì‹:**
- `ì±„ë„ëª…_YYYYMMDD_HHMMSS.json`
- ì˜ˆ: `ë– ë“¤ì©_20251023_143022.json`

---

## yt-dlp
docker exec royt-royt-api-gateway-1 yt-dlp --write-auto-sub --write-subs --sub-lang ko --sub-format vtt --skip-download "https://www.youtube.com/watch?v=6JYx7wGO5qQ"

---

## save_channel_video_details - ë¹„ë””ì˜¤ ìƒì„¸ ì •ë³´ ì €ì¥

íŠ¹ì • ì±„ë„ì˜ ëª¨ë“  ë¹„ë””ì˜¤ì— ëŒ€í•´ ìƒì„¸ ì •ë³´(ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”, ëŒ“ê¸€ ìˆ˜, ì¹´í…Œê³ ë¦¬, íƒœê·¸)ë¥¼ ì¡°íšŒí•˜ê³  DBì— ì €ì¥í•˜ëŠ” ì»¤ë§¨ë“œì…ë‹ˆë‹¤.

### ìœ„ì¹˜
- **íŒŒì¼**: `youtube/management/commands/save_channel_video_details.py`
- **ë˜í¼ ë©”ì†Œë“œ**: `youtube/youtube_api_wrapper.py:1565` (`save_channel_video_details` ë©”ì†Œë“œ)

### ì£¼ìš” ê¸°ëŠ¥
- ì±„ë„ì˜ ëª¨ë“  ë¹„ë””ì˜¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ë° ì €ì¥
- **ì´ë¯¸ ì¡°íšŒìˆ˜ ì •ë³´ê°€ ìˆëŠ” ë¹„ë””ì˜¤ëŠ” ìë™ìœ¼ë¡œ ê±´ë„ˆëœ€** (view_count > 0)
- API í˜¸ì¶œ ê°„ 3-5ì´ˆ ëœë¤ ëŒ€ê¸° (Rate Limiting íšŒí”¼)
- 50ê°œì”© ë°°ì¹˜ ì²˜ë¦¬ (YouTube API ì œí•œ)
- ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© í‘œì‹œ (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)
- API í˜¸ì¶œ íšŸìˆ˜ ìë™ ì¶”ì 

### ì €ì¥ë˜ëŠ” ì •ë³´
- `view_count`: ì¡°íšŒìˆ˜
- `like_count`: ì¢‹ì•„ìš” ìˆ˜
- `comment_count`: ëŒ“ê¸€ ìˆ˜
- `category_id`: ì¹´í…Œê³ ë¦¬ ID
- `tags`: íƒœê·¸ ë¦¬ìŠ¤íŠ¸

### ì‚¬ìš©ë²•

#### ê¸°ë³¸ ì‚¬ìš©

```bash
# ì±„ë„ IDë¡œ ì‹¤í–‰
docker exec royt-royt-api-gateway-1 ./manage.py save_channel_video_details UC_x5XG1OV2P6uZZ5FSM9Ttw

# ì±„ë„ í•¸ë“¤ë¡œ ì‹¤í–‰
docker exec royt-royt-api-gateway-1 ./manage.py save_channel_video_details @ë– ë“¤ì©
```

### íŒŒë¼ë¯¸í„°

| íŒŒë¼ë¯¸í„° | í•„ìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
|---------|------|------|------|
| `channel_identifier` | âœ… | ìœ íŠœë¸Œ ì±„ë„ ID ë˜ëŠ” í•¸ë“¤ | `UC_x5XG1OV2P6uZZ5FSM9Ttw` ë˜ëŠ” `@ë– ë“¤ì©` |

### ì¶œë ¥ ì˜ˆì‹œ

```
================================================================================
ì±„ë„ ë¹„ë””ì˜¤ ìƒì„¸ ì •ë³´ ì €ì¥
================================================================================

ì±„ë„ ì‹ë³„ì: @ë– ë“¤ì©

ë¹„ë””ì˜¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì‹œì‘...

[2025-10-24 08:30:15]
[2025-10-24 08:30:15] ================================================================================
[2025-10-24 08:30:15] ğŸ“¹ ì±„ë„ ë¹„ë””ì˜¤ ìƒì„¸ ì •ë³´ ì €ì¥ ì‹œì‘
[2025-10-24 08:30:15]    ì±„ë„: @ë– ë“¤ì©
[2025-10-24 08:30:15] ================================================================================
[2025-10-24 08:30:15]

[2025-10-24 08:30:15] ğŸ“Š ë¹„ë””ì˜¤ ë¶„ì„:
[2025-10-24 08:30:15]    ì „ì²´ ë¹„ë””ì˜¤: 150ê°œ
[2025-10-24 08:30:15]    ìƒì„¸ ì •ë³´ í•„ìš”: 120ê°œ
[2025-10-24 08:30:15]    ê±´ë„ˆë›¸ ë¹„ë””ì˜¤: 30ê°œ (ì´ë¯¸ ìƒì„¸ ì •ë³´ ìˆìŒ)
[2025-10-24 08:30:15]

[2025-10-24 08:30:15] ğŸ”„ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì‹œì‘...
[2025-10-24 08:30:15]

[2025-10-24 08:30:15] ğŸ“¦ ë°°ì¹˜ 1/3 ì²˜ë¦¬ ì¤‘ (50ê°œ ë¹„ë””ì˜¤)...
[2025-10-24 08:30:16]    âœ… ë– ë“¤ì©í•œ ì˜ìƒ ì œëª© 1... (ì¡°íšŒìˆ˜: 12,345)
[2025-10-24 08:30:16]    âœ… ë– ë“¤ì©í•œ ì˜ìƒ ì œëª© 2... (ì¡°íšŒìˆ˜: 23,456)
...

[2025-10-24 08:30:20] ğŸ“¦ ë°°ì¹˜ 2/3 ì²˜ë¦¬ ì¤‘ (50ê°œ ë¹„ë””ì˜¤)...
[2025-10-24 08:30:20]    â±ï¸  4.2ì´ˆ ëŒ€ê¸° ì¤‘...
[2025-10-24 08:30:24]    âœ… ë– ë“¤ì©í•œ ì˜ìƒ ì œëª© 51... (ì¡°íšŒìˆ˜: 34,567)
...

[2025-10-24 08:30:35] ================================================================================
[2025-10-24 08:30:35] âœ… ì±„ë„ ë¹„ë””ì˜¤ ìƒì„¸ ì •ë³´ ì €ì¥ ì™„ë£Œ
[2025-10-24 08:30:35] ================================================================================
[2025-10-24 08:30:35] ì „ì²´ ë¹„ë””ì˜¤: 150ê°œ
[2025-10-24 08:30:35] ê±´ë„ˆë›´ ë¹„ë””ì˜¤: 30ê°œ
[2025-10-24 08:30:35] ì²˜ë¦¬ ì„±ê³µ: 120ê°œ
[2025-10-24 08:30:35] ì²˜ë¦¬ ì‹¤íŒ¨: 0ê°œ
[2025-10-24 08:30:35] ================================================================================

[2025-10-24 08:30:35]
[2025-10-24 08:30:35] ================================================================================
[2025-10-24 08:30:35] ğŸ“Š YouTube API í˜¸ì¶œ ìš”ì•½
[2025-10-24 08:30:35] ================================================================================
[2025-10-24 08:30:35] ì´ API í˜¸ì¶œ íšŸìˆ˜: 3íšŒ
[2025-10-24 08:30:35] ================================================================================

================================================================================
âœ… ì²˜ë¦¬ ì™„ë£Œ!
================================================================================

ğŸ“Š ì²˜ë¦¬ ê²°ê³¼:
  - ì „ì²´ ë¹„ë””ì˜¤: 150ê°œ
  - ê±´ë„ˆë›´ ë¹„ë””ì˜¤: 30ê°œ (ì´ë¯¸ ìƒì„¸ ì •ë³´ ìˆìŒ)
  - ì²˜ë¦¬ ì„±ê³µ: 120ê°œ
  - ì²˜ë¦¬ ì‹¤íŒ¨: 0ê°œ
  - API í˜¸ì¶œ ìˆ˜: 3íšŒ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
JSON í˜•ì‹:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

{
  "total_videos": 150,
  "skipped": 30,
  "processed": 120,
  "failed": 0,
  "api_calls": 3
}

================================================================================
âœ… ì‘ì—… ì™„ë£Œ!
================================================================================
```

### ì‘ë™ ë°©ì‹

1. **ì±„ë„ í™•ì¸**: DBì—ì„œ ì±„ë„ ì •ë³´ ì¡°íšŒ
2. **ë¹„ë””ì˜¤ í•„í„°ë§**: `view_count = 0`ì¸ ë¹„ë””ì˜¤ë§Œ ì„ íƒ (ìƒì„¸ ì •ë³´ê°€ ì—†ëŠ” ë¹„ë””ì˜¤)
3. **ë°°ì¹˜ ì²˜ë¦¬**: 50ê°œì”© ë¬¶ì–´ì„œ API í˜¸ì¶œ (YouTube API ì œí•œ)
4. **ëœë¤ ëŒ€ê¸°**: ê° ë°°ì¹˜ ì‚¬ì´ì— 3-5ì´ˆ ëœë¤ ëŒ€ê¸°
5. **DB ì—…ë°ì´íŠ¸**: ì¡°íšŒí•œ ìƒì„¸ ì •ë³´ë¥¼ ê° ë¹„ë””ì˜¤ì— ì €ì¥

### API í˜¸ì¶œ ìµœì í™”

- âœ… **ì¤‘ë³µ ì¡°íšŒ ë°©ì§€**: ì´ë¯¸ ìƒì„¸ ì •ë³´ê°€ ìˆëŠ” ë¹„ë””ì˜¤ëŠ” ê±´ë„ˆëœ€
- âœ… **ë°°ì¹˜ ì²˜ë¦¬**: 50ê°œì”© ë¬¶ì–´ì„œ API í˜¸ì¶œ (ê°œë³„ í˜¸ì¶œ ëŒ€ë¹„ 50ë°° íš¨ìœ¨ì )
- âœ… **Rate Limiting**: 3-5ì´ˆ ëœë¤ ëŒ€ê¸°ë¡œ YouTube API ì œí•œ íšŒí”¼

### ì˜ˆìƒ API í˜¸ì¶œ ìˆ˜

- ë¹„ë””ì˜¤ 50ê°œ: 1íšŒ
- ë¹„ë””ì˜¤ 100ê°œ: 2íšŒ
- ë¹„ë””ì˜¤ 150ê°œ: 3íšŒ
- ë¹„ë””ì˜¤ 500ê°œ: 10íšŒ

**ê³µì‹**: `Math.ceil(ì²˜ë¦¬í• _ë¹„ë””ì˜¤_ìˆ˜ / 50)`

### ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ìƒˆë¡œìš´ ì±„ë„ì˜ ë¹„ë””ì˜¤ ëª©ë¡ì„ ê°€ì ¸ì˜¨ í›„
```bash
# 1. ì±„ë„ ì˜ìƒ ëª©ë¡ ì €ì¥ (list_channel_videos ë“±ìœ¼ë¡œ)
# 2. ìƒì„¸ ì •ë³´ ì €ì¥
docker exec royt-royt-api-gateway-1 ./manage.py save_channel_video_details @ë– ë“¤ì©
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ì£¼ê¸°ì ì¸ ì—…ë°ì´íŠ¸
```bash
# ë§¤ì¼ ë˜ëŠ” ë§¤ì£¼ ì‹¤í–‰í•˜ì—¬ ìƒˆë¡œìš´ ë¹„ë””ì˜¤ì˜ ìƒì„¸ ì •ë³´ë§Œ ì—…ë°ì´íŠ¸
docker exec royt-royt-api-gateway-1 ./manage.py save_channel_video_details @ë– ë“¤ì©
# â†’ ì´ë¯¸ ìƒì„¸ ì •ë³´ê°€ ìˆëŠ” ë¹„ë””ì˜¤ëŠ” ìë™ìœ¼ë¡œ ê±´ë„ˆëœ€
```

### ì£¼ì˜ì‚¬í•­

- ì±„ë„ì˜ ë¹„ë””ì˜¤ê°€ DBì— ë¨¼ì € ì €ì¥ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤
- ì²˜ë¦¬í•  ë¹„ë””ì˜¤ê°€ ë§ì„ ê²½ìš° ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤
  - ì˜ˆ: 500ê°œ ë¹„ë””ì˜¤ = ì•½ 10íšŒ API í˜¸ì¶œ = ìµœì†Œ 45ì´ˆ (9ë²ˆ ëŒ€ê¸° Ã— 5ì´ˆ)
- API í• ë‹¹ëŸ‰ì„ ê³ ë ¤í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”
  - ê° API í˜¸ì¶œì€ 1 quota unit ì†Œëª¨

### ê´€ë ¨ íŒŒì¼

- **ì»¤ë§¨ë“œ**: `youtube/management/commands/save_channel_video_details.py`
- **ë˜í¼ ë©”ì†Œë“œ**: `youtube/youtube_api_wrapper.py:1565` (`save_channel_video_details`)
- **í—¬í¼ ë©”ì†Œë“œ**: `youtube/youtube_api_wrapper.py:1717` (`_get_video_details_for_save`)
- **ëª¨ë¸**: `youtube/models.py` (`YouTubeVideo` ëª¨ë¸)
